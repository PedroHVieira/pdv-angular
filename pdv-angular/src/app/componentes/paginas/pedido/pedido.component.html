<main role="main" class="col-md-12 col-lg-12 px-4 pt-3">
  <div class=" mb-3 mt-3 border-bottom">
    <h1 class="h2">Cadastro de Pedidos</h1>
    <!-- <button type="button" class="btn btn-outline-dark btn-sm">Adicionar</button> -->
  </div>
  <form class="forms mb-5" method="POST">
    <div class="row">
      <div class="col-md-6 col-sm-12 col-xs-6 m-0">
        <div class="form-group">
          <label for="exampleInputPassword1">Produto*</label>
          <select [(ngModel)]="formProduto" id="formCategoria" name="formCategoria" class="form-select form-select-sm" aria-label="Default select example">
            <option *ngFor="let produto of produtos" value="{{produto.prod_id}}">{{produto.prod_nome}}</option>
        </select>
        </div>
      </div>
      <div class="col-md-4 col-sm-12 col-xs-4 m-0">
        <div class="form-group">
          <label for="exampleInputPassword1">Quantidade*</label>
          <input [(ngModel)]="formQtd" id="formPreco" name="formPreco" type="text" class="form-control form-control-sm validar" placeholder=""
            autocomplete="off" value="{{formQtd}}" required>
        </div>
      </div>
      <div class="col-md-2 col-sm-12 col-xs-2 m-0">
        <div class="form-group">
          <label for="exampleInputPassword1" class="invisible">Quantidade*</label>
          <button (click)="adicionarPedido()" title="Inserir Item..." type="button" class="btn btn-outline-info btn-block btn-sm">Inserir</button>
        </div>
      </div>
    </div>
    <div class="row">
      <table class="table table-striped table-sm">
        <thead class="">
          <tr>
            <th>Item</th>
            <th class="text-center">Preço</th>
            <th class="text-center">Qtd</th>
            <th class="text-center">Imposto</th>
            <th class="text-center">Total Liquido</th>
            <th class="text-center">Total Bruto</th>
            <th class="text-center">Ação</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of itens">
            <td >{{item.nome_produto}}</td>
            <td class="text-center">{{item.qtd}}</td>
            <td class="text-center">R$ {{item.preco_produto}}</td>
            <td class="text-center">R$ {{item.imposto}}</td>
            <td class="text-center">R$ {{item.liquido}}</td>
            <td class="text-center">R$ {{item.bruto}}</td>
            <td>
              <i (click)="remover(item.id)" class=" ml-3 ico fa fa-trash" title="Deletar item..."></i>
            </td>
          </tr >
        </tbody>
        <tfoot>
          <tr>
            <th class="text-center" colspan="3"></th>
            <th class="text-center" colspan="">R$ {{totalImposto}}</th>
            <th class="text-center">R$ {{totalLiquido}}</th>
            <th class="text-center">R$ {{totalBruto}}</th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12 m-0">
        <button (click)="salvar()" type="button" class="btn btn-outline-success btn-block btn-sm">Salvar</button>
      </div>
    </div>
  </form>
  <hr class="separator">
  <div class=" mb-3 mt-3">
    <h1 class="h2">Lista de Pedidos</h1>
    <!-- <button type="button" class="btn btn-outline-dark btn-sm">Adicionar</button> -->
  </div>
  <div class="container-flex p-0">
    <div class="row">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th class="text-center">#</th>
            <th class="text-center">Valor Bruto</th>
            <th class="text-center">Valor Liquido</th>
            <th class="text-center">Imposto Total</th>
            <th class="text-center">Ação</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let pedido of pedidos">
            <td class="text-center">{{pedido.pedi_id}}</td>
            <td class="text-center">R$ {{pedido.pedi_valo_bruto}}</td>
            <td class="text-center">R$ {{pedido.pedi_valor_liquido}}</td>
            <td class="text-center">R$ {{pedido.pedi_valor_imposto}}</td>
            <td class="text-center">
              <i (click)="deletar(pedido)" class="ico fa fa-trash" title="Deletar item..."></i>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>
